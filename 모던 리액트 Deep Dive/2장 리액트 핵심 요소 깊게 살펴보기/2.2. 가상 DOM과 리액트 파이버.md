# ğŸš€ 2.2. ê°€ìƒ DOMê³¼ ë¦¬ì•¡íŠ¸ íŒŒì´ë²„

## ğŸ” 1. DOMê³¼ ë¸Œë¼ìš°ì € ë Œë”ë§ ê³¼ì •

> DOMì€ ì›¹ í˜ì´ì§€ì— ëŒ€í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ, **ë¸Œë¼ìš°ì €ê°€ ì›¹ í˜ì´ì§€ì˜ ì½˜í…ì¸ ì™€ êµ¬ì¡°ë¥¼ ì–´ë–»ê²Œ ë³´ì—¬ì¤„ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼** ë‹´ê³  ìˆë‹¤.

ë¸Œë¼ìš°ì €ê°€ ì›¹ ì‚¬ì´íŠ¸ ì ‘ê·¼ ìš”ì²­ì„ ë°›ê³  í™”ë©´ì„ ê·¸ë¦¬ëŠ” ê³¼ì •ì—ì„œ ì¼ì–´ë‚˜ëŠ” ì¼ì€ ì•„ë˜ì™€ ê°™ë‹¤.

> 1. ë¸Œë¼ìš°ì €ê°€ ì‚¬ìš©ìê°€ ìš”ì²­í•œ ì£¼ì†Œë¥¼ ë°©ë¬¸í•´ HTML íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•œë‹¤.
> 2. ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§ ì—”ì§„ì€ **HTMLì„ íŒŒì‹±í•´ DOM ë…¸ë“œë¡œ êµ¬ì„±ëœ íŠ¸ë¦¬(DOM)ë¥¼ ë§Œë“ ë‹¤.**
> 3. 2ë²ˆ ê³¼ì •ì—ì„œ CSS íŒŒì¼ì„ ë§Œë‚˜ë©´ í•´ë‹¹ CSS íŒŒì¼ë„ ë‹¤ìš´ë¡œë“œí•œë‹¤.
> 4. ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§ ì—”ì§„ì€ **CSS íŒŒì¼ì„ íŒŒì‹±í•´ CSS ë…¸ë“œë¡œ êµ¬ì„±ëœ íŠ¸ë¦¬(CSSOM)ë¥¼ ë§Œë“ ë‹¤.**
> 5. íŠ¸ë¦¬ ë¶„ì„ ì†ë„ë¥¼ ì¡°ê¸ˆì´ë¼ë„ ë¹ ë¥´ê²Œ í•˜ê¸° ìœ„í•´ì„œ ë¸Œë¼ìš°ì €ëŠ” 2ë²ˆì—ì„œ ë§Œë“  DOM ë…¸ë“œ ì¤‘ ëˆˆì— ë³´ì´ëŠ” ë…¸ë“œë§Œ ìˆœíšŒí•œë‹¤.
> 6. ëˆˆì— ë³´ì´ëŠ” ë…¸ë“œë¥¼ ëŒ€ìƒìœ¼ë¡œ í•´ë‹¹ ë…¸ë“œì— ëŒ€í•œ CSSOM ì •ë³´ë¥¼ ì°¾ê³ , ì—¬ê¸°ì„œ ë°œê²¬í•œ CSS ìŠ¤íƒ€ì¼ ì •ë³´ë¥¼ í•´ë‹¹ DOM ë…¸ë“œì— ì ìš©í•œë‹¤.

| CSS ì ìš© ê³¼ì •            | ì„¤ëª…                                                                                                              |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------- |
| ë ˆì´ì•„ì›ƒ(layout, rellow) | ê° ë…¸ë“œê°€ ë¸Œë¼ìš°ì € í™”ë©´ì˜ **ì–´ëŠ ì¢Œí‘œì— ì •í™•í•˜ê²Œ ë‚˜íƒ€ë‚˜ì•¼ í•˜ëŠ”ì§€ ê³„ì‚°í•˜ëŠ”** ê³¼ì • (ë°˜ë“œì‹œ í˜ì¸íŒ… ê³¼ì •ë„ í•¨ê»˜ ê±°ì¹¨) |
| í˜ì¸íŒ…(painting)         | ë ˆì´ì•„ì›ƒ ë‹¨ê³„ë¥¼ ê±°ì¹œ ë…¸ë“œì— **ìƒ‰ê³¼ ê°™ì€ ì‹¤ì œ ìœ íš¨í•œ ëª¨ìŠµì„** ê·¸ë¦¬ëŠ” ê³¼ì •                                          |

![](https://jess2.xyz/static/0c389301ba794f3ca7b491572d73971d/13e20/browser4.png)

_**ğŸ”¥ ì‹¤ì œë¡œ HTML, CSSê°€ ë Œë”ë§ë˜ëŠ” ê³¼ì • ì˜ˆì œ ì½”ë“œ**_

> 1. HTML ë‹¤ìš´ë¡œë“œì™€ í•¨ê»˜ ë¶„ì„
> 2. ìŠ¤íƒ€ì¼ì‹œíŠ¸ê°€ í¬í•¨ëœ link íƒœê·¸ë¥¼ ë°œê²¬í•´ style.css ë‹¤ìš´ë¡œë“œ
> 3. body íƒœê·¸ í•˜ë‹¨ì˜ divëŠ” `width: 100%`ì´ë¯€ë¡œ ë·°í¬íŠ¸ë¡œ ì¢Œìš° 100% ë„ˆë¹„ë¡œ ì¡ìŒ
> 4. 3ë²ˆ í•˜ë‹¨ì˜ divëŠ” `width: 50%`, ì¦‰ ë¶€ëª¨ì˜ 50%ë¥¼ ë„ˆë¹„ë¡œ ì¡ì•„ì•¼ í•˜ë¯€ë¡œ ì „ì²´ ì˜ì—­ì˜ 50% ë„ˆë¹„ë¡œ ì¡ìŒ
> 5. 2ë²ˆì—ì„œ ë‹¤ìš´ë¡œë“œí•œ CSSì— `id="text"`ì— ëŒ€í•œ ìŠ¤íƒ€ì¼ ì •ë³´ë¥¼ ê²°í•©í•¨
> 6. í™”ë©´ì— HTML ì •ë³´ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•œ ëª¨ë“  ì •ë³´ê°€ ì¤€ë¹„ë˜ì—ˆìœ¼ë¯€ë¡œ ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë Œë”ë§ ìˆ˜í–‰

```html
#text { background-color: red; color: white; }

<!doctype html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <title>Hello React!</title>
  </head>
  <body>
    <div style="width: 100%">
      <div id="text" style="width: 50%">Hello world!</div>
    </div>
  </body>
</html>
```

## ğŸ” 2. ê°€ìƒ DOMì˜ íƒ„ìƒ ë°°ê²½

> `ê°€ìƒ DOM`ì€ ì›¹ í˜ì´ì§€ê°€ í‘œì‹œí•´ì•¼ í•  **DOMì„ ì¼ë‹¨ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ê³ ,** ë¦¬ì•¡íŠ¸ê°€ ì‹¤ì œ ë³€ê²½ì— ëŒ€í•œ ì¤€ë¹„ê°€ ì™„ë£Œëì„ ë•Œ ì‹¤ì œ ë¸Œë¼ìš°ì €ì˜ DOMì— ë°˜ì˜í•œë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë Œë”ë§ ê³¼ì •ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆê³  ë¸Œë¼ìš°ì €ì™€ ê°œë°œìì˜ ë¶€ë‹´ì„ ëœ ìˆ˜ ìˆë‹¤.

ë Œë”ë§ ì´í›„ `ì¶”ê°€ ë Œë”ë§ ì‘ì—…`ì€ í•˜ë‚˜ì˜ í˜ì´ì§€ì—ì„œ ëª¨ë“  ì‘ì—…ì´ ì¼ì–´ë‚˜ëŠ” **ì‹±ê¸€ í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜<sup>Single Page Application</sup>ì—ì„œ ë”ìš± ë§ì•„ì§„ë‹¤.** ì´ íŠ¹ì§• ë•Œë¬¸ì— í˜ì´ì§€ì˜ ê¹œë¹¡ì„ ì—†ì´ ìì—°ìŠ¤ëŸ¬ìš´ ì›¹ í˜ì´ì§€ íƒìƒ‰ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, í•˜ë‚˜ì˜ í˜ì´ì§€ì—ì„œ ê³„ì†í•´ì„œ ìš”ì†Œì˜ ìœ„ì¹˜ë¥¼ ì¬ê³„ì‚°í•´ì•¼ í•˜ë¯€ë¡œ DOMì„ ê´€ë¦¬í•˜ëŠ” ê³¼ì •ì—ì„œ ë¶€ë‹´í•´ì•¼ í•  ë¹„ìš©ì´ ì»¤ì§„ë‹¤. ì´ëŸ¬í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ íƒ„ìƒí•œ ê²ƒì´ ë°”ë¡œ `ê°€ìƒ DOM`ì´ë‹¤.

## ğŸ” 3. ê°€ìƒ DOMì„ ìœ„í•œ ì•„í‚¤í…ì²˜, ë¦¬ì•¡íŠ¸ íŒŒì´ë²„

### ğŸ’¬ 1. ë¦¬ì•¡íŠ¸ íŒŒì´ë²„ë€?

> `ë¦¬ì•¡íŠ¸ íŒŒì´ë²„`ëŠ” ë¦¬ì•¡íŠ¸ì—ì„œ ê´€ë¦¬í•˜ëŠ” í‰ë²”í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì´ë‹¤. íŒŒì´ë²„ ì¬ì¡°ì •ì<sup>fiber reconciler</sup>ê°€ íŒŒì´ë²„ë¥¼ ê´€ë¦¬í•˜ëŠ”ë°, ê°€ìƒ DOMê³¼ ì‹¤ì œ DOMì„ ë¹„êµí•´ **ë³€ê²½ ì‚¬í•­ì„** ìˆ˜ì§‘í•˜ë©°, ë‘˜ ì‚¬ì´ì— ì°¨ì´ê°€ ìˆìœ¼ë©´ ë³€ê²½ì— **ê´€ë ¨ëœ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” íŒŒì´ë²„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í™”ë©´ì— ë Œë”ë§ì„ ìš”ì²­í•˜ëŠ”** ì—­í• ì„ í•œë‹¤. ì´ ëª¨ë“  ê³¼ì •ì€ **ë¹„ë™ê¸°ë¡œ** ì¼ì–´ë‚œë‹¤.

ë¦¬ì•¡íŠ¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜, ë ˆì´ì•„ì›ƒ, ê·¸ë¦¬ê³  ì‚¬ìš©ì ì¸í„°ë™ì…˜ì— ì˜¬ë°”ë¥¸ ê²°ê³¼ë¬¼ì„ ë§Œë“œëŠ” `ë°˜ì‘ì„± ë¬¸ì œ`ë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ ë¦¬ì•¡íŠ¸ íŒŒì´ë²„ì˜ ëª©í‘œë‹¤. ì´ë¥¼ ìœ„í•´ íŒŒì´ë²„ëŠ” ì•„ë˜ì™€ ê°™ì€ ì¼ì„ í•œë‹¤.

| ë¦¬ì•¡íŠ¸ íŒŒì´ë²„ê°€ í•˜ëŠ” ì¼                                                   |
| ------------------------------------------------------------------------- |
| ì‘ì—…ì„ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„í• í•˜ê³  ìª¼ê°  ë‹¤ìŒ **ìš°ì„ ìˆœìœ„ë¥¼** ë§¤ê¹€                 |
| ì‘ì—…ì„ **ì¼ì‹œ ì¤‘ì§€í•˜ê³  ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆìŒ**                       |
| ì´ì „ì— í–ˆë˜ ì‘ì—…ì„ **ì¬ì‚¬ìš©í•˜ê±°ë‚˜** í•„ìš”í•˜ì§€ ì•Šì€ ê²½ìš° **íê¸°í• ** ìˆ˜ ìˆìŒ |

íŒŒì´ë²„ëŠ” í•˜ë‚˜ì˜ ì‘ì—… ë‹¨ìœ„ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ë¦¬ì•¡íŠ¸ëŠ” ì´ëŸ¬í•œ ì‘ì—… ë‹¨ìœ„ë¥¼ í•˜ë‚˜ì”© ì²˜ë¦¬í•˜ê³  `finishedWork()`ë¼ëŠ” ì‘ì—…ìœ¼ë¡œ ë§ˆë¬´ë¦¬í•œë‹¤. ê·¸ë¦¬ê³  ì´ ì‘ì—…ì„ ì»¤ë°‹í•´ ì‹¤ì œ ë¸Œë¼ìš°ì € DOMì— ê°€ì‹œì ì¸ ë³€ê²½ì„ ë§Œë“¤ì–´ ë‚¸ë‹¤. ì´ ê³¼ì •ì„ ë‘ ë‹¨ê³„ë¡œ ë‚˜ëˆ„ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

> 1. `ë Œë” ë‹¨ê³„`ì—ì„œ ë¦¬ì•¡íŠ¸ëŠ” ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ì§€ ì•ŠëŠ” **ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì„** ìˆ˜í–‰í•œë‹¤.  
>    1-1. ì´ ë‹¨ê³„ì—ì„œ ì•ì„œ ì–¸ê¸‰í•œ íŒŒì´ë²„ì˜ ì‘ì—…, ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì •/ì¤‘ì§€/ë²„ë¦¬ëŠ” ë“±ì˜ ì‘ì—…ì´ ì¼ì–´ë‚œë‹¤
> 2. `ì»¤ë°‹ ë‹¨ê³„`ì—ì„œëŠ” DOMì— ì‹¤ì œ ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•˜ê¸° ìœ„í•œ ì‘ì—…, `commitWork()`ê°€ ì‹¤í–‰ëœë‹¤.  
>    2-1. ì´ ê³¼ì •ì€ ë™ê¸°ì‹ìœ¼ë¡œ ì¼ì–´ë‚˜ê³  ì¤‘ë‹¨ë  ìˆ˜ë„ ì—†ë‹¤.

_**ğŸ”¥ íŒŒì´ë²„ëŠ” ì–´ë–»ê²Œ êµ¬í˜„ë˜ì–´ ìˆì„ê¹Œ?**_

> íŒŒì´ë²„ëŠ” **ì»´í¬ë„ŒíŠ¸ê°€ ìµœì´ˆë¡œ ë§ˆìš´íŠ¸ë˜ëŠ”** ì‹œì ì— ìƒì„±ë˜ì–´ ì´í›„ì—ëŠ” ê°€ê¸‰ì ì´ë©´ **ì¬ì‚¬ìš©ëœë‹¤.** ì´ë ‡ê²Œ ìƒì„±ëœ íŒŒì´ë²„ëŠ” stateê°€ ë³€ê²½ë˜ê±°ë‚˜ ìƒëª…ì£¼ê¸° ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê±°ë‚˜ DOMì˜ ë³€ê²½ì´ í•„ìš”í•œ ì‹œì  ë“±ì— ì‹¤í–‰ëœë‹¤. ì´ëŸ° ì‘ì—…ë“¤ì€ ë°”ë¡œ ì²˜ë¦¬í•˜ê¸°ë„ í•˜ê³  ìŠ¤ì¼€ì¤„ë§í•´ ì‘ì€ ë‹¨ìœ„ë¡œ ë‚˜ëˆ ì„œ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ì²˜ë¦¬í•˜ê¸°ë„ í•œë‹¤.

```js
// ë¦¬ì•¡íŠ¸ ë‚´ë¶€ ì½”ë“œì— ì‘ì„±ë˜ì–´ ìˆëŠ” íŒŒì´ë²„ ê°ì²´
function FiberNode(tag, pendingProps, key, mode) {
  /** Instance
   * @tag 1:1ë¡œ ë§¤ì¹­ëœ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒ â†’ 1:1ë¡œ ì—°ê²°ë˜ëŠ” ê±´ ë¦¬ì•¡íŠ¸ì˜ ì»´í¬ë„ŒíŠ¸, DOM ë…¸ë“œ ë“± ë‹¤ì–‘í•¨
   * @stateNode íŒŒì´ë²„ ìì²´ì— ëŒ€í•œ ì°¸ì¡° ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒ â†’ ì´ ì°¸ì¡°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¦¬ì•¡íŠ¸ëŠ” íŒŒì´ë²„ì™€ ê´€ë ¨ëœ ìƒíƒœì— ì ê·¼
   */
  this.tag = tag;
  this.key = key;
  this.element = null;
  this.stateNode = null;
  this.type = null;

  /** Fiber
   * @return @child @sibling íŒŒì´ë²„ ê°„ì˜ ê´€ê³„ ê°œë…ì„ ë‚˜íƒ€ëƒ„
   * @child ìì‹ íŒŒì´ë²„
   * @sibling í˜•ì œ íŒŒì´ë²„
   * @return ë¶€ëª¨ íŒŒì´ë²„
   * @index ì—¬ëŸ¬ í˜•ì œë“¤ ì‚¬ì´ì—ì„œ ìì‹ ì˜ ìœ„ì¹˜ê°€ ëª‡ ë²ˆì§¸ì¸ì§€ ìˆ«ìë¡œ í‘œí˜„ (0ë¶€í„° ì‹œì‘)
   * íŒŒì´ë²„ë„ íŠ¸ë¦¬ í˜•ì‹ì„ ê°€ì§€ëŠ”ë°, íŠ¸ë¦¬ êµ¬ì„± ì‹œ í•„ìš”í•œ ì •ë³´ê°€ ì´ ì†ì„± ë‚´ë¶€ì— ì •ì˜ë¨
   * ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì™€ ë‹¤ë¥¸ ì  â†’ childrenì´ ì—†ê³  í•˜ë‚˜ì˜ childë§Œ ì¡´ì¬í•¨
   */
  this.return = null;
  this.child = null;
  this.sibling = null;
  this.index = 0;

  this.ref = null;
  this.refCleanup = null;

  /**
   * @pendingProps ì•„ì§ ì‘ì—…ì„ ë¯¸ì²˜ ì²˜ë¦¬í•˜ì§€ ëª»í•œ Props
   * @memoizedProps pendingPropsë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë Œë”ë§ì´ ì™„ë£Œëœ ì´í›„ì— pendingPropsë¥¼ memoziedPropsë¡œ ì €ì¥í•´ ê´€ë¦¬
   * @updateQueue ìƒíƒœ ì—…ë°ì´íŠ¸, ì½œë°± í•¨ìˆ˜, DOM ì—…ë°ì´íŠ¸ ë“± í•„ìš”í•œ ì‘ì—…ì„ ë‹´ì•„ë‘ëŠ” í
   * @memoizedState í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì˜ í›… ëª©ë¡ì´ ì €ì¥ë¨ â†’ ë‹¨ìˆœíˆ useState ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë“  í›… ë¦¬ìŠ¤íŠ¸ê°€ ì €ì¥ë¨
   */
  this.pendingProps = pendingProps;
  this.memoizedProps = null;
  this.updateQueue = null;
  this.memoizedState = null;
  this.dependencies = null;

  this.mode = mode;

  // Effects
  this.flags = NoFlags;
  this.subtreeFlags = NoFlags;
  this.deletions = null;

  this.lanes = NoLanes;
  this.childLanes = NoLanes;

  // ë¦¬ì•¡íŠ¸ì˜ íŠ¸ë¦¬ëŠ” ë‘ ê°œì¸ë°, ì´ alternateëŠ” ë°˜ëŒ€í¸ íŠ¸ë¦¬ë¥¼ ê°€ë¦¬í‚´
  this.alternate = null;

  // ì´í•˜ í”„ë¡œíŒŒì¼ëŸ¬, __DEV__ ì½”ë“œ ìƒëµ
}
```

```js
// ë¦¬ì•¡íŠ¸ì— ì‘ì„±ë˜ì–´ ìˆëŠ” íŒŒì´ë²„ë¥¼ ìƒì„±í•˜ëŠ” ë‹¤ì–‘í•œ í•¨ìˆ˜
var createFiber = function (tag, pendingProps, key, mode) {
  return new FiberNode(tag, pendingProps, key, mode);
};

// í•˜ë‚˜ì˜ elementë‹¹ íŒŒì´ë²„ í•˜ë‚˜ ìƒì„±
function createFiberFromElement(element, mode, lanes) {
  var owner = null;

  {
    owner = element._owner;
  }

  var type = element.type;
  var key = element.key;
  var pendingProps = element.props;
  var fiber = createFiberFromTypeAndProps(
    type,
    key,
    pendingProps,
    owner,
    mode,
    lanes
  );

  {
    fiber._debugSource = element._source;
    fiber._debugOwner = element._owner;
  }

  return fiber;
}

function createFiberFromFragment(elements, mode, lanes, key) {
  var fiber = createFiber(Fragment, elments, key, mode);
  fiber.lanes = lanes;

  return fiber;
}
```

íŒŒì´ë²„ íƒœê·¸<sup>tag</sup>ê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê°’ë“¤ì€ ì•„ë˜ì™€ ê°™ë‹¤.

```js
var FunctionComponent = 0;
var ClassComponent = 1;
var IndeterminateComponent = 2;
var HostRoot = 3;
var HostPortal = 4;
var HostComponent = 5; // ì›¹ì˜ div ê°™ì€ ìš”ì†Œ
var HostText = 6;
var Fragment = 7;
var Mode = 8;
var ContextConsumer = 9;
var ContextProvider = 10;
var ForwardRef = 11;
var Profiler = 12;
var SuspenseComponent = 13;
var MemoComponent = 14;
var SimpleMemoComponent = 15;
var LazyComponent = 16;
var IncompleteClassComponent = 17;
var DehydratedFragment = 18;
var SuspenseListComponent = 19;
var ScopeComponent = 21;
var OffscreenComponent = 22;
var LegacyHiddenComponent = 23;
var CacheComponent = 24;
var TracingmarkerComponent = 25;
```

_**ğŸ”¥ ì—¬ëŸ¬ ê°œì˜ ìì‹ì´ ìˆëŠ” êµ¬ì¡°ëŠ” íŒŒì´ë²„ë¡œ ì–´ë–»ê²Œ í‘œí˜„ë ê¹Œ?**_

íŒŒì´ë²„ëŠ” ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì™€ ë‹¬ë¦¬ childrenì´ ì•„ë‹Œ í•˜ë‚˜ì˜ `child`ë§Œ ê°€ì§„ë‹¤. íŒŒì´ë²„ì˜ ìì‹ì€ í•­ìƒ ì²« ë²ˆì§¸ ìì‹ì˜ ì°¸ì¡°ë¡œ êµ¬ì„±ë˜ë¯€ë¡œ `<ul />` íŒŒì´ë²„ì˜ ìì‹ì€ ì²« ë²ˆì§¸ `<li />` íŒŒì´ë²„ê°€ ë˜ê³ , ë‚˜ë¨¸ì§€ `<li />` íŒŒì´ë²„ëŠ” í˜•ì œ<sup>sibling</sup>ë¡œ êµ¬ì„±ëœë‹¤. ê·¸ë¦¬ê³  ëª¨ë“  `<li />` íŒŒì´ë²„ëŠ” `<ul />` íŒŒì´ë²„ë¥¼ ë¶€ëª¨ íŒŒì´ë²„ë¡œ ê°€ì§„ë‹¤.

```html
<ul>
  <li>í•˜ë‚˜</li>
  <li>ë‘˜</li>
  <li>ì…‹</li>
</ul>
```

```js
// ê´€ê³„ë„ë¥¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë‚˜íƒ€ë‚¸ ê²ƒ
const l3 = {
  return: ul,
  index: 2,
};

const l2 = {
  sibling: l3,
  return: ul,
  index: 1,
};

const l1 = {
  sibling: l2,
  return: ul,
  index: 0,
};

const ul = {
  child: l1,
};
```

`updateQueue`ëŠ” ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.

```ts
type UpdateQueue = {
  first: Update | null; // íì˜ ì²˜ìŒ
  last: Update | null; // íì˜ ë§ˆì§€ë§‰
  hasForceUpdate: boolean;
  callbackList: null | Array<Callback>; // setStateë¡œ ë„˜ê¸´ ì½œë°± ëª©ë¡
};
```

### ğŸ’¬ 2. ë¦¬ì•¡íŠ¸ íŒŒì´ë²„ íŠ¸ë¦¬

> íŒŒì´ë²„ íŠ¸ë¦¬ëŠ” **í˜„ì¬ ëª¨ìŠµì„** ë‹´ì€ íŠ¸ë¦¬ì™€ **ì‘ì—… ì¤‘ì¸ ìƒíƒœë¥¼** ë‚˜íƒ€ë‚´ëŠ” `workInProgress` íŠ¸ë¦¬ ë‘ ê°œë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. ë¦¬ì•¡íŠ¸ íŒŒì´ë²„ì˜ ì‘ì—…ì´ ëë‚˜ë©´ ë¦¬ì•¡íŠ¸ëŠ” ë‹¨ìˆœíˆ `workInProgress` íŠ¸ë¦¬ë¥¼ í˜„ì¬ íŠ¸ë¦¬ë¡œ ë°”ê¿” ë²„ë¦¬ëŠ”ë°, ì´ëŸ° ê¸°ìˆ ì„ ë”ë¸” ë²„í¼ë§ì´ë¼ê³  í•œë‹¤.

ë¯¸ì²˜ ë‹¤ ê·¸ë¦¬ì§€ ëª»í•œ ëª¨ìŠµì„ ë…¸ì¶œì‹œí‚¤ì§€ ì•Šê¸° ìœ„í•´ ë”ë¸” ë²„í¼ë§ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ëŠ”ë°, ì´ë¥¼ ìœ„í•´ ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ íŠ¸ë¦¬ ë‘ ê°œê°€ ì¡´ì¬í•˜ë©° ì´ ê³¼ì •ì€ `ì»¤ë°‹ ë‹¨ê³„`ì— ìˆ˜í–‰ëœë‹¤.

1. í˜„ì¬ UI ë Œë”ë§ì„ ì¡´ì¬í•˜ëŠ” íŠ¸ë¦¬ì¸ `current` íŠ¸ë¦¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  ì‘ì—…ì´ ì‹œì‘ë¨
2. `current` íŠ¸ë¦¬ì—ì„œ ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•˜ë©´ íŒŒì´ë²„ëŠ” ë¦¬ì•¡íŠ¸ì—ì„œ ë°›ì€ ìƒˆë¡œìš´ ë°ì´í„°ë¡œ ìƒˆë¡œìš´ `workInProgress` íŠ¸ë¦¬ë¥¼ ë¹Œë“œ
3. `workInProgress` íŠ¸ë¦¬ ë¹Œë“œ ì‘ì—…ì´ ëë‚˜ë©´ ë‹¤ìŒ ë Œë”ë§ì— í•´ë‹¹ íŠ¸ë¦¬ ì‚¬ìš©
4. `workInProgress` íŠ¸ë¦¬ê°€ UIì— ìµœì¢…ì ìœ¼ë¡œ ë Œë”ë§ë˜ì–´ ë°˜ì˜ì´ ì™„ë£Œë˜ë©´ `current`ê°€ ì´ `WorkInProgress` íŠ¸ë¦¬ë¡œ ë³€ê²½ë¨

![](https://velog.velcdn.com/images/kky1373/post/ecd07853-a6ea-4b7e-ae99-69287c8d5158/image.png)

### ğŸ’¬ 3. íŒŒì´ë²„ì˜ ì‘ì—… ìˆœì„œ

> 1. ë¦¬ì•¡íŠ¸ëŠ” `beginWork()` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ ë” ì´ìƒ ìì‹ì´ ì—†ëŠ” íŒŒì´ë²„ë¥¼ ë§Œë‚  ë•Œê¹Œì§€ íŠ¸ë¦¬ í˜•ì‹ìœ¼ë¡œ íŒŒì´ë²„ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.  
>    1-1. 1ë²ˆì—ì„œ ì‘ì—…ì´ ëë‚œë‹¤ë©´ ê·¸ ë‹¤ìŒ `completeWork()` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ íŒŒì´ë²„ ì‘ì—…ì„ ì™„ë£Œí•œë‹¤.  
>    1-2. í˜•ì œê°€ ìˆë‹¤ë©´ í˜•ì œë¡œ ë„˜ì–´ê°„ë‹¤.
> 2. 1-1, 1-2ë²ˆì´ ëª¨ë‘ ëë‚¬ë‹¤ë©´ `return`ìœ¼ë¡œ ëŒì•„ê°€ ìì‹ ì˜ ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŒì„ ì•Œë¦°ë‹¤.

```html
<A1>
  <B1>ì•ˆë…•í•˜ì„¸ìš”</B1>
  <B2>
    <C1>
      <D1 />
      <D2 />
    </C1>
  </B2>
  <B3 />
</A1>
```

![](https://inblog.ai/_next/image?url=https%3A%2F%2Ffgobbnslcbjgothosvni.supabase.co%2Fstorage%2Fv1%2Fobject%2Fpublic%2Fimages%2Fpost_image%2F2024-03-09T08%3A16%3A51.173Z-5844c718-5364-4f20-bce1-7b05e0f3e11e&w=1920&q=75)

## ğŸ” 4. íŒŒì´ë²„ì™€ ê°€ìƒ DOM

> ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ì •ë³´ë¥¼ 1:1ë¡œ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ `íŒŒì´ë²„`ì´ë©°, ì´ íŒŒì´ë²„ëŠ” ë¦¬ì•¡íŠ¸ ì•„í‚¤í…ì²˜ ë‚´ë¶€ì—ì„œ **ë¹„ë™ê¸°ë¡œ** ì´ë£¨ì–´ì§„ë‹¤.

ì‹¤ì œ ë¸Œë¼ìš°ì € êµ¬ì¡°ì¸ `DOM`ì— ë°˜ì˜í•˜ëŠ” ê²ƒì€ ë™ê¸°ì ìœ¼ë¡œ ì¼ì–´ë‚˜ì•¼ í•˜ê³ , ì²˜ë¦¬í•˜ëŠ” ì‘ì—…ì´ ë§ì•„ í™”ë©´ì— ë¶ˆì™„ì „í•˜ê²Œ í‘œì‹œë  ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ë¯€ë¡œ ì´ëŸ¬í•œ ì‘ì—…ì„ ê°€ìƒì—ì„œ, **ì¦‰ ë©”ëª¨ë¦¬ìƒì—ì„œ ë¨¼ì € ìˆ˜í–‰í•´ ìµœì¢…ì ì¸ ê²°ê³¼ë¬¼ë§Œ ì‹¤ì œ ë¸Œë¼ìš°ì € `DOM`ì— ì ìš©í•˜ëŠ” ê²ƒì´ë‹¤.**

## ğŸ“„ REFERENCE

ëª¨ë˜ ë¦¬ì•¡íŠ¸ Deep Dive 2ì¥ 2ì ˆ ê°€ìƒ DOMê³¼ ë¦¬ì•¡íŠ¸ íŒŒì´ë²„
